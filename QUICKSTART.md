# Getting Started with the Braintree Android SDK

## Acquire an Instance of `BraintreeFragment`

```java
class MyActivity extends Activity implements PaymentMethodCreatedListener {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        try {
            // the second argument to BraintreeFragment.newInstance can either be a client token
            // generated by your server, or a static client key
            BraintreeFragment braintreeFragment = BraintreeFragment.newInstance(activity, clientToken);
        } catch (InvalidArgumentException e) {
            // client token or client key was invalid
        }

        // Activities that implement `PaymentMethodCreatedListener` and other `BraintreeListener`s
        // will be automatically added as a listener by the `BraintreeFragment`.
        // To manually add or remove a listener call `BraintreeFragment#addListener` or `BraintreeFragment#removeListener`
    }

    @Override
    public void onPaymentMethodCreated(PaymentMethod paymentMethod) {
        String nonce = paymentMethod.getNonce();
        // send nonce to your server
    }
}
```

## Use the `PaymentButton`

```java
PaymentButton paymentButton = (PaymentButton) findViewById(R.id.payment_button);
paymentButton.initialize(braintreeFragment);
```

## Use Drop-in

```java
private void startDropin() {
    Intent intent = new Intent(this, BraintreePaymentActivity.class)
            .putExtra(BraintreePaymentActivity.EXTRA_CLIENT_TOKEN, clientToken);
    startActivityForResult(intent, DROP_IN_REQUEST_CODE);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (resultCode == RESULT_OK) {
        PaymentMethod paymentMethod = data
                .getParcelableExtra(BraintreePaymentActivity.EXTRA_PAYMENT_METHOD);
        String nonce = paymentMethod.getNonce();
        // send nonce to your server
    }
}
```

## Tokenize a Card

```java
CardBuilder cardBuilder = new CardBuilder()
    .cardNumber(cardNumber)
    .expirationDate(expirationDate);

TokenizationClient.tokenize(braintreeFragment, cardBuilder);
```

## Tokenize a PayPal Account

```java
PayPal.authorizeAccount(braintreeFragment);
```

## Perform Billing Agreement with PayPal OneTouchCore
```java
PayPalCheckout checkout = new PayPalCheckout();
PayPal.billingAgreement(braintreeFragment, checkout);
```

## Perform Express Checkout with PayPal OneTouchCore
```java
PayPalCheckout checkout = new PayPalCheckout(new BigDecimal(19.99));
PayPal.checkout(braintreeFragment, checkout);
```

## Tokenize a Card from Venmo

```java
Venmo.authorize(braintreeFragment);
```

## Tokenize an Android Pay Card

### Get a `GoogleApiClient`

```java
GoogleApiClient googleApiClient = braintreeFragment.getGoogleApiClient();
```

### Get `PaymentMethodTokenizationParameters`

**Note:** `PaymentMethodTokenizationParameters` can only be acquired after configuration has been
fetched from Braintree. To wait until configuration has been fetched, implement `ConfigurationListener`
and wait for the callback.

```java
AndroidPay.getTokenizationParameters(braintreeFragment)
```

### Get Allowed Card Networks

**Note:** Allowed card networks can only be acquired after configuration has been
fetched from Braintree. To wait until configuration has been fetched, implement `ConfigurationListener`
and wait for the callback.

```java
AndroidPay.getAllowedCardNetworks(braintreeFragment)
```

### Request an Android Pay `MaskedWallet`

```java
AndroidPay.performMaskedWalletRequest(braintreeFragment, cart, isBillingAgreement, shippingAddressRequired, phoneNumberRequired, requestCode);
```

### Tokenize an Android Pay `FullWallet`

```java
AndroidPay.tokenize(braintreeFragment, fullWallet);
```

## Handle Errors

```java
class MyActivity extends Activity implements BraintreeErrorListener {

    @Override
    public void onUnrecoverableError(Throwable throwable) {
        // authorization, errors communicating with the server and general errors are returned here
    }

    @Override
    public void onRecoverableError(ErrorWithResponse error) {
        // validation errors are returned here
    }
}
```
